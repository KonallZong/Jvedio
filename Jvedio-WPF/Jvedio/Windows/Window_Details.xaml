<Window
    x:Class="Jvedio.Window_Details"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cmd="clr-namespace:Jvedio.Core.Command"
    xmlns:config="clr-namespace:Jvedio;assembly=Jvedio"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Jvedio"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:media="clr-namespace:Jvedio.Core.Media"
    xmlns:p="clr-namespace:Jvedio.Properties"
    xmlns:super="https://github.com/SuperStudio/SuperControls"
    Title="{Binding CurrentVideo.Title, TargetNullValue=Detail}"
    Width="1230"
    Height="720"
    AllowsTransparency="True"
    Background="Transparent"
    Closing="Window_Closing"
    ContentRendered="Window_ContentRendered"
    Foreground="{DynamicResource Window.Detail.Foreground}"
    ResizeMode="NoResize"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">

    <Window.Resources>



        <local:VideoTypeToIntConverter x:Key="VideoTypeToIntConverter" />

        <Style x:Key="ExtraPic" TargetType="Image">

            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="{Binding ElementName=scrollViewer, Path=ActualHeight, Converter={StaticResource SmallerValueConverter}, ConverterParameter=20, Mode=OneWay}" />
            <Setter Property="Source" Value="{Binding}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding}" Value="{x:Null}">
                    <Setter Property="Source" Value="pack://application:,,,/Resources/Picture/NoPrinting_S.png" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="BigImage" TargetType="Image">

            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="10" />
            <Setter Property="Stretch" Value="Uniform" />
            <Setter Property="Source" Value="{Binding CurrentVideo.BigImage, UpdateSourceTrigger=Explicit}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding CurrentVideo.BigImage}" Value="{x:Null}">
                    <Setter Property="Source" Value="pack://application:,,,/Resources/Picture/NoPrinting_B.png" />
                </DataTrigger>
            </Style.Triggers>
        </Style>


        <Style
            x:Key="ViewTextBox"
            BasedOn="{StaticResource ReadOnlyWrapTextBox}"
            TargetType="TextBox">

            <Setter Property="FontSize" Value="16" />

            <Setter Property="Foreground" Value="{DynamicResource Window.Foreground}" />
            <Setter Property="ContextMenu" Value="{StaticResource CopyContextMenu}" />
            <Setter Property="Margin" Value="0,5" />
            <Setter Property="Padding" Value="0" />
        </Style>



        <Style x:Key="BaseTextBlock" TargetType="TextBlock">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />

            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontFamily" Value="微软雅黑" />

            <Setter Property="Foreground" Value="{DynamicResource Window.Sub.Foreground}" />
            <Setter Property="Margin" Value="0,0" />
            <Setter Property="Opacity" Value="0.9" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>





        <!--  如果 tag 为空则不显示  -->
        <Style x:Key="InfoStackPanel" TargetType="StackPanel">

            <Setter Property="Orientation" Value="Horizontal" />
            <Setter Property="Margin" Value="0,5,0,0" />
            <Style.Triggers>
                <Trigger Property="Tag" Value="">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Trigger>
            </Style.Triggers>
        </Style>


    </Window.Resources>



    <Grid
        x:Name="rootGrid"
        Focusable="True"
        PreviewKeyUp="Grid_PreviewKeyUp">

        <Border
            x:Name="backgroundBorder"
            Margin="10"
            Background="{DynamicResource Window.Background}"
            CornerRadius="5"
            Effect="{StaticResource PopupDropShadowEffect}" />


        <Image
            x:Name="BgImage"
            Margin="10"
            Source="{x:Null}"
            Stretch="UniformToFill" />

        <!--  影片关联弹框  -->
        <Popup
            x:Name="AssoDataPopup"
            Width="690"
            Height="auto"
            AllowsTransparency="True"
            HorizontalOffset="-5"
            Placement="MousePoint"
            PopupAnimation="Fade"
            StaysOpen="True"
            VerticalOffset="0">
            <Grid Margin="5">
                <Border
                    Margin="5"
                    Background="{DynamicResource Menu.Background}"
                    CornerRadius="5"
                    Effect="{StaticResource PopupDropShadowEffect}" />

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border CornerRadius="5 5 0 0" Style="{StaticResource InfoBorder}">
                        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                            <TextBlock
                                Grid.Row="0"
                                FontWeight="Bold"
                                Foreground="{DynamicResource Window.Foreground}"
                                Style="{StaticResource BaseTextBlock}"
                                Text="关联影片" />
                            <TextBlock
                                Foreground="{DynamicResource Window.Sub.Foreground}"
                                Style="{StaticResource BaseTextBlock}"
                                Text="{Binding ViewAssociationDatas.Count, StringFormat=\ ({0})}" />
                        </StackPanel>
                    </Border>

                    <super:HoverPath
                        VerticalAlignment="Center"
                        Click="HideAssocPopup"
                        Style="{StaticResource CloseHoverPath}" />

                    <ScrollViewer
                        Grid.Row="1"
                        Margin="5"
                        CanContentScroll="True"
                        FocusVisualStyle="{x:Null}"
                        HorizontalScrollBarVisibility="Auto"
                        IsDeferredScrollingEnabled="False"
                        PreviewMouseWheel="ScrollViewer_MouseWheel"
                        VerticalScrollBarVisibility="Hidden">
                        <ItemsControl
                            Name="assoItemsControl"
                            Margin="5,5,5,5"
                            Background="Transparent"
                            ItemsSource="{Binding ViewAssociationDatas}"
                            ScrollViewer.VerticalScrollBarVisibility="Auto">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <!--  影片加载动画  -->
                                    <DataTemplate.Triggers>
                                        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation
                                                        FillBehavior="Stop"
                                                        Storyboard.TargetName="rootGrid"
                                                        Storyboard.TargetProperty="(UIElement.Opacity)"
                                                        From="0"
                                                        To="1"
                                                        Duration="0:0:0.3" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </DataTemplate.Triggers>

                                    <Grid
                                        Name="rootGrid"
                                        Margin="10"
                                        Tag="{Binding DataID, Mode=OneWay}">
                                        <Border Name="rootBorder">
                                            <Border.Style>
                                                <Style BasedOn="{StaticResource SimpleBorder}" TargetType="Border">
                                                    <Setter Property="Effect" Value="{StaticResource BlueDropShadowEffect}" />
                                                    <Setter Property="BorderThickness" Value="2" />
                                                    <Setter Property="CornerRadius" Value="3" />
                                                    <Setter Property="Margin" Value="0" />
                                                    <Setter Property="MinWidth" Value="200" />
                                                    <Setter Property="Background" Value="{DynamicResource ListBoxItem.Background}" />

                                                </Style>
                                            </Border.Style>
                                        </Border>
                                        <Grid Margin="0" Tag="{Binding id, Mode=OneWay}">

                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                            </Grid.RowDefinitions>
                                            <!--  图片  -->
                                            <Grid Grid.Row="0">

                                                <media:GifImage
                                                    x:Name="gifImage"
                                                    Width="{Binding BigImage_Width, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay}"
                                                    Height="{Binding BigImage_Height, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay}"
                                                    Margin="2"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    BigImageSource="{Binding BigImage, Mode=OneWay}"
                                                    Cursor="Hand"
                                                    MouseLeftButtonUp="ShowDetails"
                                                    SourceType="BigImage"
                                                    Stretch="{Binding Path=MainImageAutoMode, Source={x:Static p:Settings.Default}, Converter={StaticResource BoolToImageStretchConverter}, Mode=OneWay}" />

                                                <Button
                                                    Height="auto"
                                                    Margin="0,5,5,5"
                                                    Padding="5"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Bottom"
                                                    Click="ShowAssocSubSection"
                                                    Cursor="Hand"
                                                    Style="{StaticResource RoundNormalButton}"
                                                    Tag="{DynamicResource Button.Hover.Background}"
                                                    Visibility="{Binding HasSubSection, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                                                    <Button.ContextMenu>
                                                        <ContextMenu
                                                            Width="100"
                                                            HorizontalOffset="-50"
                                                            VerticalOffset="10" />
                                                    </Button.ContextMenu>
                                                    <Image
                                                        Width="20"
                                                        Height="20"
                                                        Source="/Resources/Picture/subsection1.png" />
                                                </Button>

                                                <Canvas
                                                    Width="40"
                                                    Height="40"
                                                    Margin="10,0,10,0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Cursor="Hand"
                                                    MouseLeftButtonUp="PlayAssocVideo"
                                                    Opacity="0.5"
                                                    ToolTip="{Binding id, Mode=OneWay}">
                                                    <Ellipse
                                                        Canvas.Left="3"
                                                        Canvas.Top="3"
                                                        Width="40"
                                                        Height="40"
                                                        Fill="#DD744C" />
                                                    <Polygon
                                                        Cursor="Hand"
                                                        Fill="#F6F7F7"
                                                        Points="15,38 35,25 15,10"
                                                        Stroke="{DynamicResource Menu.Background}" />
                                                </Canvas>

                                            </Grid>


                                            <!--  ID  -->

                                            <!--  标签戳+ID  -->
                                            <Grid
                                                Name="idGrid"
                                                Grid.Row="1"
                                                Width="auto"
                                                HorizontalAlignment="Stretch"
                                                Background="Transparent">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <TextBox
                                                    Grid.Column="0"
                                                    Width="auto"
                                                    Margin="0,5"
                                                    Padding="10,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    FontFamily="微软雅黑"
                                                    FontSize="15"
                                                    Foreground="{DynamicResource Window.Foreground}"
                                                    Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                    Text="{Binding VID, Mode=OneWay}"
                                                    TextAlignment="Left"
                                                    Visibility="{Binding Path=DisplayID, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay}" />
                                                <super:HoverPath Grid.Column="1" CopyData="{Binding VID}">
                                                    <super:HoverPath.Style>
                                                        <Style BasedOn="{StaticResource CopyHoverPath}" TargetType="super:HoverPath">
                                                            <Setter Property="Visibility" Value="Hidden" />
                                                            <Setter Property="Margin" Value="0" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding ElementName=idGrid, Path=IsMouseOver}" Value="true">
                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </super:HoverPath.Style>
                                                </super:HoverPath>



                                                <!--  标签戳  -->

                                                <ItemsControl
                                                    Grid.Column="2"
                                                    Margin="5,5"
                                                    HorizontalAlignment="Right"
                                                    ItemsSource="{Binding TagStamp}"
                                                    Tag="{Binding DataID}"
                                                    Visibility="{Binding Path=DisplayStamp, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <StackPanel Orientation="Horizontal" />
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border
                                                                Margin="2,0"
                                                                Padding="4"
                                                                Background="{Binding BackgroundBrush}"
                                                                BorderThickness="0"
                                                                CornerRadius="3"
                                                                Tag="{Binding TagID}">
                                                                <Border.ContextMenu>
                                                                    <ContextMenu>
                                                                        <MenuItem Click="DeleteVideoTagStamp" Header="{DynamicResource DeleteTagStamp}" />
                                                                    </ContextMenu>
                                                                </Border.ContextMenu>
                                                                <TextBlock Foreground="{DynamicResource Window.Foreground}" Text="{Binding TagName}" />
                                                            </Border>

                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>

                                            </Grid>

                                            <!--  日期  -->
                                            <TextBox
                                                Grid.Row="2"
                                                Margin="0,0"
                                                Padding="10,5"
                                                HorizontalAlignment="Left"
                                                Background="Transparent"
                                                FontSize="15"
                                                Foreground="{DynamicResource Window.Foreground}"
                                                Opacity="0.5"
                                                Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                Text="{Binding ReleaseDate, Mode=OneWay}"
                                                TextAlignment="Left"
                                                Visibility="{Binding Path=DisplayDate, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay}" />

                                            <!--  评分  -->
                                            <StackPanel
                                                Grid.Row="3"
                                                Width="auto"
                                                Margin="15,5,0,10"
                                                HorizontalAlignment="Left"
                                                Cursor="Hand"
                                                PreviewMouseLeftButtonDown="StackPanel_PreviewMouseLeftButtonDown"
                                                Tag="{Binding DataID, Mode=OneWay}"
                                                Visibility="{Binding Path=DisplayFavorites, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay}">
                                                <super:Rating
                                                    Half="True"
                                                    RateBackground="{DynamicResource Window.Title.Background}"
                                                    RateForeground="{DynamicResource Common.HighLight.Deep.Background}"
                                                    StarHeight="15"
                                                    StarMargin="3 0"
                                                    ValueChanged="AssocDataRate_ValueChanged"
                                                    Value="{Binding Grade, Mode=TwoWay}" />
                                            </StackPanel>

                                            <TextBox
                                                Grid.Row="4"
                                                Width="{Binding Path=GlobalImageWidth, Source={x:Static config:ConfigManager.VideoConfig}, Converter={StaticResource BiggerWidthConverter}, Mode=OneWay}"
                                                Height="35"
                                                Margin="0,5,0,15"
                                                Padding="10,0"
                                                HorizontalAlignment="Center"
                                                Background="Transparent"
                                                FontSize="14"
                                                Foreground="{DynamicResource Window.Foreground}"
                                                MouseLeftButtonDown="CopyText"
                                                Opacity="0.5"
                                                Style="{StaticResource ReadOnlyNoWrapTextBox}"
                                                Text="{Binding Title, Mode=OneWay}"
                                                TextAlignment="Left"
                                                TextWrapping="Wrap"
                                                ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}"
                                                Visibility="{Binding Path=DisplayTitle, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static config:ConfigManager.VideoConfig}, Mode=OneWay}" />


                                        </Grid>
                                    </Grid>

                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>


            </Grid>
        </Popup>


        <Grid Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" MinWidth="50" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>



            <Grid
                x:Name="PreviousGrid"
                Grid.Column="0"
                PreviewMouseWheel="Border_PreviewMouseWheel">
                <Border
                    x:Name="PreviousBorder"
                    Width="30"
                    Height="60"
                    Margin="5,0"
                    CornerRadius="10"
                    Cursor="Hand"
                    MouseLeftButtonUp="PreviousMovie"
                    ToolTip="{DynamicResource Previous}">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Background" Value="{DynamicResource Window.Side.Background}" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource Window.Title.Background}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>

                    <Viewbox
                        Width="20"
                        Height="auto"
                        Margin="-5,0,0,0"
                        VerticalAlignment="Center">
                        <Path
                            Width="auto"
                            Data="M1277.88977564 224.440834H740.72230864l-0.906357-176.437459c-0.151059-42.749829-51.964457-64.049214-82.17635-33.83732L194.49127464 478.371798c-18.882433 18.882433-18.731374 49.396446 0.151059 68.27888L662.32244564 1009.950065c30.514012 30.211894 82.32741 8.45933 82.02529-34.441559l-0.755297-170.999317H1278.04083464c26.284347 0 47.432673-21.299385 47.432673-47.432673V271.873506c0-26.284347-21.299385-47.432673-47.583732-47.432672z"
                            Fill="{DynamicResource Window.Sub.Foreground}" />
                    </Viewbox>
                </Border>

                <StackPanel
                    x:Name="ImageChangeStackPanel"
                    Margin="0,20"
                    VerticalAlignment="Bottom"
                    Orientation="Vertical">
                    <RadioButton
                        Height="30"
                        Margin="5,5,5,0"
                        Background="{DynamicResource Window.Side.Background}"
                        Click="ExtraImageRadioButton_Click"
                        FocusVisualStyle="{x:Null}"
                        GroupName="ExtraImageView"
                        IsChecked="{Binding ShowScreenShot, Mode=TwoWay, Converter={StaticResource OppositeBooleanConverter}}"
                        Style="{StaticResource FlatRoundRadioButton}"
                        ToolTip="{DynamicResource Poster}">
                        <Image
                            Width="22"
                            Height="22"
                            Source="/Resources/Picture/图像.png" />
                    </RadioButton>
                    <RadioButton
                        Height="30"
                        Margin="5,5,5,0"
                        Click="ScreenShotRadioButton_Click"
                        FocusVisualStyle="{x:Null}"
                        GroupName="ExtraImageView"
                        IsChecked="{Binding ShowScreenShot, Mode=TwoWay}"
                        Style="{StaticResource FlatRoundRadioButton}"
                        ToolTip="{DynamicResource ScreenShot}">
                        <Image
                            Width="22"
                            Height="22"
                            Source="/Resources/Picture/视频.png" />
                    </RadioButton>
                </StackPanel>


            </Grid>

            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" MinHeight="45" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  标题  -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" MinWidth="50" />
                        <ColumnDefinition Width="auto" MinWidth="50" />
                    </Grid.ColumnDefinitions>

                    <Grid
                        x:Name="MouseMoveGrid"
                        Grid.Column="0"
                        Background="Transparent"
                        MouseMove="MoveWindow" />

                    <TextBox
                        x:Name="TitleTextBox"
                        Grid.Column="0"
                        Margin="0,0,50,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Background="Transparent"
                        FocusVisualStyle="{x:Null}"
                        FontSize="16"
                        FontWeight="Bold"
                        Foreground="{DynamicResource Window.Sub.Foreground}"
                        Style="{StaticResource ViewTextBox}"
                        Text="{Binding CurrentVideo.Title}"
                        TextAlignment="Left"
                        TextWrapping="NoWrap"
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}">
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem
                                    Click="TranslateMovie"
                                    Header="{DynamicResource Translate}"
                                    Visibility="Collapsed" />
                                <MenuItem Command="ApplicationCommands.Copy" Header="{DynamicResource Copy}" />
                                <MenuItem Command="ApplicationCommands.SelectAll" Header="{DynamicResource SelectAllText}" />
                            </ContextMenu>
                        </TextBox.ContextMenu>
                    </TextBox>

                    <StackPanel
                        Grid.Column="2"
                        VerticalAlignment="Top"
                        Orientation="Horizontal">
                        <Border
                            Margin="10,5"
                            Padding="5"
                            super:CommonExt.HoverBackground="{DynamicResource Window.Title.Background}"
                            CornerRadius="3"
                            Cursor="Hand"
                            MouseLeftButtonUp="DownLoadInfo"
                            Style="{StaticResource HoverBorder}">
                            <TextBlock
                                Grid.Column="1"
                                Style="{StaticResource BaseTextBlock}"
                                Text="{DynamicResource SyncInfo}" />
                        </Border>
                        <Border
                            Margin="10,5"
                            Padding="5"
                            super:CommonExt.HoverBackground="{DynamicResource Window.Title.Background}"
                            CornerRadius="3"
                            Cursor="Hand"
                            Style="{StaticResource HoverBorder}">
                            <TextBlock
                                Grid.Column="1"
                                MouseLeftButtonUp="EditInfo"
                                Style="{StaticResource BaseTextBlock}"
                                Text="{DynamicResource Edit}" />
                        </Border>
                        <super:HoverPath
                            Width="30"
                            Height="30"
                            Margin="5,5,10,5"
                            VerticalAlignment="Center"
                            Click="CloseWindow"
                            Style="{StaticResource CloseHoverPath}" />
                    </StackPanel>



                </Grid>



                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="400" />
                    </Grid.ColumnDefinitions>


                    <!--  图片  -->
                    <Grid Grid.Column="0">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="200" />
                        </Grid.RowDefinitions>

                        <Button
                            Height="auto"
                            Margin="5,5,10,70"
                            Padding="5"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Panel.ZIndex="19"
                            Click="ViewAssocDatas"
                            Cursor="Hand"
                            Style="{StaticResource RoundNormalButton}"
                            Tag="{DynamicResource Button.Hover.Background}"
                            Visibility="{Binding CurrentVideo.HasAssociation, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">

                            <Image
                                Width="32"
                                Height="32"
                                Source="/Resources/Picture/asso.png" />
                        </Button>

                        <Grid
                            Margin="10,20"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Panel.ZIndex="10"
                            PreviewMouseLeftButtonUp="PlayVideo">
                            <Grid.ContextMenu>
                                <ContextMenu
                                    Width="100"
                                    HorizontalOffset="-50"
                                    VerticalOffset="10"
                                    Visibility="Collapsed" />
                            </Grid.ContextMenu>


                            <Ellipse Width="40" Height="40">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">


                                        <Setter Property="Cursor" Value="Hand" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}}, Path=IsMouseOver}" Value="True">
                                                <Setter Property="Fill" Value="#AD744C" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}}, Path=IsMouseOver}" Value="False">
                                                <Setter Property="Fill" Value="#E07C4A" />
                                            </DataTrigger>
                                        </Style.Triggers>

                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>


                            <Viewbox Width="20" Height="auto">
                                <Path
                                    Width="auto"
                                    Data="M870.2 466.333333l-618.666667-373.28a53.333333 53.333333 0 0 0-80.866666 45.666667v746.56a53.206667 53.206667 0 0 0 80.886666 45.666667l618.666667-373.28a53.333333 53.333333 0 0 0 0-91.333334z"
                                    Fill="{DynamicResource Window.Foreground}" />
                            </Viewbox>
                        </Grid>

                        <!--  大图  -->
                        <Grid
                            x:Name="ImageGrid"
                            Grid.Row="0"
                            HorizontalAlignment="Stretch"
                            AllowDrop="True"
                            Background="Transparent"
                            DragOver="BigImage_DragOver"
                            Drop="BigImage_Drop"
                            MouseLeftButtonDown="Grid_MouseLeftButtonDown"
                            MouseMove="MoveWindow"
                            PreviewMouseWheel="Grid_PreviewMouseWheel">
                            <Grid.ContextMenu>
                                <ContextMenu Opacity="0.8" PreviewKeyUp="ContextMenu_PreviewKeyUp">
                                    <MenuItem Click="DownLoad" Header="{DynamicResource Menu_SyncInfo}" />
                                    <MenuItem
                                        Header="{DynamicResource Menu_SyncExtra}"
                                        Visibility="Collapsed"
                                        IsEnabled="False">
                                        <MenuItem Click="DownLoadMagnets" Header="{DynamicResource SyncMagnets}" />
                                    </MenuItem>
                                    <MenuItem Header="{DynamicResource Menu_Advance}">
                                        <MenuItem Click="GetScreenShot" Header="{DynamicResource Menu_GenerateScreenShot}" />
                                        <MenuItem
                                            Click="GetScreenGif"
                                            Header="{DynamicResource Menu_GenerateGif}"
                                            Visibility="Collapsed" />

                                        <MenuItem
                                            Click="TranslateMovie"
                                            Header="{DynamicResource Menu_Translate}"
                                            IsEnabled="False"
                                            Visibility="Collapsed" />
                                        <MenuItem
                                            Header="{DynamicResource Menu_GenerateThumbnail}"
                                            IsEnabled="False"
                                            Visibility="Collapsed" />
                                        <MenuItem
                                            Header="{DynamicResource Menu_GenerateActressImage}"
                                            IsEnabled="False"
                                            Visibility="Collapsed" />
                                    </MenuItem>
                                    <MenuItem Header="{DynamicResource OpenPath}">
                                        <MenuItem
                                            Command="cmd:File.OpenSelectFile"
                                            CommandParameter="{Binding CurrentVideo.Path}"
                                            Header="{DynamicResource Movie}" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource Poster}" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource Thumbnail}" />
                                        <MenuItem Click="OpenPath" Header="Gif" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource Preview}" />
                                        <MenuItem Click="OpenPath" Header="{DynamicResource ScreenShot}" />
                                    </MenuItem>




                                    <MenuItem
                                        Click="OpenWeb"
                                        Header="{DynamicResource ViewWebsite}"
                                        Icon="pack://application:,,,/Resources/menuitem/openwebsite.png" />
                                    <MenuItem x:Name="OpenOtherUrlMenuItem" Header="{DynamicResource OpenOtherUrl}" />

                                    <MenuItem
                                        x:Name="CopyMagnetsMenuItem"
                                        Header="{DynamicResource CopyMagnets}"
                                        Visibility="{Binding TeenMode, Source={x:Static local:ConfigManager.Settings}, Mode=OneWay, Converter={StaticResource BoolToOppositeVisibilityConverter}}" />

                                    <MenuItem Click="CopyFile" Header="{DynamicResource Menu_CopyFile}" />

                                    <MenuItem Click="DeleteID" Header="{DynamicResource Menu_DeleteInfo}" />
                                    <MenuItem
                                        Click="DeleteFile"
                                        Header="{DynamicResource Menu_DeleteFile}"
                                        Icon="pack://application:,,,/Resources/menuitem/clear.png" />

                                </ContextMenu>
                            </Grid.ContextMenu>
                            <Image x:Name="BigImage" Style="{StaticResource BigImage}" />
                        </Grid>

                        <!--  预览图  -->
                        <Grid x:Name="ThumbGrid" Grid.Row="1">
                            <ProgressBar
                                x:Name="ProgressBar"
                                Width="auto"
                                Height="10"
                                Margin="10,-6"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Top"
                                Background="Transparent"
                                IsVisibleChanged="ProgressBar_IsVisibleChanged"
                                Maximum="100"
                                Minimum="0"
                                Style="{StaticResource NormalStaticProgressBar}"
                                ValueChanged="ProgressBar_ValueChanged"
                                Visibility="Visible"
                                Value="0" />

                            <Border
                                x:Name="ExtraImageBorder"
                                Margin="0,10"
                                AllowDrop="True"
                                Background="{DynamicResource Window.Side.Background}"
                                CornerRadius="10"
                                DragOver="Border_DragOver"
                                Drop="Border_Drop"
                                FocusVisualStyle="{x:Null}"
                                Visibility="Visible">
                                <ScrollViewer
                                    x:Name="scrollViewer"
                                    Margin="5"
                                    VerticalContentAlignment="Center"
                                    FocusVisualStyle="{x:Null}"
                                    HorizontalScrollBarVisibility="Auto"
                                    PreviewMouseWheel="scrollViewer_PreviewMouseWheel"
                                    VerticalScrollBarVisibility="Hidden">
                                    <ItemsControl
                                        x:Name="imageItemsControl"
                                        VerticalContentAlignment="Center"
                                        AlternationCount="999"
                                        Background="Transparent"
                                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>


                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel x:Name="ImageStackPanel" Orientation="Horizontal">
                                                    <Grid Margin="10,0">
                                                        <Border
                                                            Panel.ZIndex="5"
                                                            Background="Black"
                                                            Cursor="Hand"
                                                            MouseEnter="Border_MouseEnter"
                                                            MouseLeave="Border_MouseLeave"
                                                            MouseLeftButtonUp="ShowExtraImage"
                                                            Opacity="0.5"
                                                            Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=(ItemsControl.AlternationIndex)}">
                                                            <Border.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Click="OpenExtraImagePath" Header="{DynamicResource OpenPath}" />
                                                                    <MenuItem Header="{DynamicResource SetAs}" Visibility="Collapsed">
                                                                        <MenuItem Click="SetToBigAndSmallPic" Header="{DynamicResource ThumbnailAndPoster}" />
                                                                        <MenuItem Click="SetToSmallPic" Header="{DynamicResource Thumbnail}" />
                                                                        <MenuItem Click="SetToBigPic" Header="{DynamicResource Poster}" />
                                                                    </MenuItem>
                                                                    <MenuItem Click="DeleteImage" Header="{DynamicResource DeleteImage}" />
                                                                    <MenuItem Click="DeleteAllImage" Header="{DynamicResource DeleteAllImageInList}" />
                                                                </ContextMenu>
                                                            </Border.ContextMenu>
                                                        </Border>

                                                        <Image Style="{StaticResource ExtraPic}" />
                                                    </Grid>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </Border>

                        </Grid>


                    </Grid>


                    <!--  信息  -->
                    <Grid
                        x:Name="InfoGrid"
                        Grid.Column="1"
                        Margin="10,0,0,0">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="auto" MinWidth="50" />
                        </Grid.ColumnDefinitions>

                        <Popup
                            x:Name="ActorPopup"
                            AllowsTransparency="True"
                            HorizontalOffset="-30"
                            IsOpen="False"
                            Placement="MousePoint"
                            PopupAnimation="Fade"
                            StaysOpen="True"
                            VerticalOffset="5">
                            <Grid
                                Margin="10"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Panel.ZIndex="10">
                                <Border
                                    Margin="10"
                                    Background="{DynamicResource Window.InnerDialog.Background}"
                                    CornerRadius="5"
                                    Effect="{StaticResource BlueDropShadowEffect}" />
                                <Image
                                    x:Name="ActorImage"
                                    Width="125"
                                    Height="125"
                                    Margin="10"
                                    Source="pack://application:,,,/Resources/Picture/NoPrinting_A.png" />
                            </Grid>
                        </Popup>



                        <Border
                            x:Name="InfoBorder"
                            Grid.Column="0"
                            Margin="10"
                            VerticalAlignment="Top"
                            CornerRadius="5">

                            <TabControl
                                Margin="10,5"
                                Background="Transparent"
                                SelectedIndex="{Binding InfoSelectedIndex, Mode=TwoWay}"
                                Style="{DynamicResource RoundTabControlStyle}">
                                <TabItem
                                    Margin="5"
                                    Padding="5"
                                    Header="{DynamicResource MovieInfo}"
                                    Style="{DynamicResource RoundTabItemStyle}">

                                    <Grid Name="infoGrid">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>


                                        <StackPanel Grid.Row="0">
                                            <StackPanel
                                                Margin="-1,0,0,5"
                                                HorizontalAlignment="Left"
                                                Orientation="Horizontal">
                                                <TextBox
                                                    HorizontalAlignment="Left"
                                                    FontFamily="Times New Roman"
                                                    FontSize="24"
                                                    Foreground="{DynamicResource Window.Foreground}"
                                                    Style="{StaticResource ViewTextBox}"
                                                    Text="{Binding CurrentVideo.VID, Mode=OneWay, FallbackValue=VID}" />
                                                <super:HoverPath
                                                    Grid.Column="1"
                                                    CopyData="{Binding VID}"
                                                    Style="{StaticResource CopyHoverPath}" />
                                            </StackPanel>
                                            <ItemsControl
                                                Grid.Column="1"
                                                Margin="5,5"
                                                HorizontalAlignment="Left"
                                                ItemsSource="{Binding CurrentVideo.TagStamp}"
                                                Visibility="{Binding Path=DisplayStamp, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}, Mode=OneWay}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border
                                                            Margin="2,0"
                                                            Padding="4"
                                                            Background="{Binding BackgroundBrush}"
                                                            BorderThickness="0"
                                                            CornerRadius="3">
                                                            <TextBlock Foreground="{DynamicResource Window.Foreground}" Text="{Binding TagName}" />
                                                        </Border>

                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                            <StackPanel Orientation="Horizontal">
                                                <TextBox
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    Style="{StaticResource ViewTextBox}"
                                                    Text="{Binding CurrentVideo.ReleaseDate}" />

                                                <StackPanel Margin="10,0" Orientation="Horizontal">
                                                    <Viewbox Width="20" Height="auto">
                                                        <Path
                                                            Width="auto"
                                                            Data="M541.541 499.932V326.635c0-16.568-13.432-30-30-30s-30 13.432-30 30v185.723l0.002 0.082c0.001 0.467 0.012 0.934 0.035 1.4 0.012 0.241 0.034 0.479 0.052 0.719 0.018 0.247 0.032 0.495 0.056 0.741 0.029 0.301 0.069 0.598 0.107 0.896 0.023 0.183 0.043 0.366 0.07 0.549 0.047 0.322 0.104 0.64 0.162 0.959 0.029 0.159 0.054 0.319 0.085 0.478 0.063 0.322 0.136 0.64 0.21 0.958 0.036 0.158 0.07 0.315 0.109 0.473 0.076 0.308 0.161 0.612 0.247 0.916 0.048 0.169 0.093 0.338 0.144 0.507 0.085 0.283 0.178 0.562 0.271 0.841 0.064 0.191 0.126 0.382 0.194 0.572 0.089 0.25 0.185 0.497 0.281 0.744 0.084 0.217 0.167 0.433 0.256 0.648 0.089 0.215 0.184 0.426 0.277 0.639 0.107 0.243 0.214 0.486 0.328 0.726 0.086 0.181 0.177 0.359 0.266 0.538 0.132 0.264 0.264 0.527 0.404 0.788 0.083 0.154 0.17 0.306 0.256 0.459 0.155 0.277 0.31 0.553 0.475 0.825 0.082 0.136 0.168 0.269 0.252 0.403 0.175 0.28 0.35 0.559 0.535 0.835 0.088 0.131 0.181 0.259 0.271 0.389 0.187 0.269 0.373 0.537 0.569 0.801 0.107 0.144 0.22 0.284 0.33 0.426 0.187 0.242 0.373 0.485 0.568 0.723 0.146 0.177 0.299 0.349 0.449 0.523 0.169 0.196 0.333 0.394 0.508 0.586 0.272 0.301 0.554 0.593 0.838 0.882 0.061 0.062 0.118 0.127 0.18 0.189l131.327 131.325c5.857 5.858 13.535 8.787 21.213 8.787s15.355-2.929 21.213-8.787c11.716-11.716 11.716-30.71 0-42.426l-122.54-122.54z M871.34 360.185c-19.645-46.444-47.761-88.149-83.568-123.957-35.808-35.808-77.513-63.924-123.957-83.568C615.714 132.315 564.637 122 512 122s-103.714 10.315-151.815 30.66c-46.444 19.645-88.149 47.761-123.957 83.568-35.808 35.807-63.924 77.512-83.568 123.957C132.315 408.286 122 459.363 122 512s10.315 103.714 30.66 151.814c19.645 46.444 47.761 88.149 83.568 123.957 35.807 35.808 77.512 63.924 123.957 83.568C408.286 891.685 459.363 902 512 902s103.714-10.315 151.814-30.66c46.444-19.645 88.149-47.761 123.957-83.568s63.924-77.513 83.568-123.957C891.685 615.714 902 564.637 902 512s-10.315-103.714-30.66-151.815zM512 842c-181.963 0-330-148.037-330-330s148.037-330 330-330 330 148.037 330 330-148.037 330-330 330z"
                                                            Fill="{DynamicResource Window.Sub.Foreground}" />
                                                    </Viewbox>
                                                    <TextBox
                                                        Margin="5,0"
                                                        VerticalAlignment="Center"
                                                        FontSize="14"
                                                        Style="{StaticResource ViewTextBox}"
                                                        Text="{Binding CurrentVideo.Duration, StringFormat='\{0} min'}" />
                                                </StackPanel>

                                            </StackPanel>


                                            <super:Rating
                                                Margin="5,10"
                                                Cursor="Hand"
                                                FocusVisualStyle="{x:Null}"
                                                Half="True"
                                                RateBackground="{DynamicResource Window.Title.Background}"
                                                RateForeground="{DynamicResource Common.HighLight.Deep.Background}"
                                                StarMargin="3 0"
                                                ValueChanged="Rate_ValueChanged"
                                                Value="{Binding CurrentVideo.Grade, Mode=TwoWay}" />

                                        </StackPanel>


                                        <!--  可滚动  -->
                                        <ScrollViewer
                                            Grid.Row="1"
                                            FocusVisualStyle="{x:Null}"
                                            HorizontalScrollBarVisibility="Disabled"
                                            VerticalScrollBarVisibility="Hidden">
                                            <StackPanel FocusVisualStyle="{x:Null}">
                                                <!--  演员  -->

                                                <ScrollViewer
                                                    Name="actorScrollViewer"
                                                    Width="{Binding ElementName=infoGrid, Path=ActualWidth, Converter={StaticResource SmallerValueConverter}, ConverterParameter=20}"
                                                    HorizontalAlignment="Left"
                                                    FocusVisualStyle="{x:Null}"
                                                    HorizontalScrollBarVisibility="Auto"
                                                    PreviewMouseWheel="ScrollViewer_MouseWheel"
                                                    VerticalScrollBarVisibility="Hidden">


                                                    <ItemsControl
                                                        Grid.Column="2"
                                                        Height="auto"
                                                        VerticalAlignment="Top"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding CurrentActorList}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <StackPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Grid
                                                                    Name="rootGrid"
                                                                    Width="auto"
                                                                    Margin="5"
                                                                    MouseLeftButtonUp="ShowSameActor"
                                                                    Tag="{Binding ActorID, Mode=OneWay}">
                                                                    <Border
                                                                        Name="rootBorder"
                                                                        Padding="0"
                                                                        Background="{DynamicResource ListBoxItem.Background}"
                                                                        BorderThickness="2"
                                                                        CornerRadius="0 0 2 2 "
                                                                        Effect="{StaticResource BlueDropShadowEffect}" />
                                                                    <Grid>
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="auto" />
                                                                            <RowDefinition Height="auto" />
                                                                            <RowDefinition Height="*" />
                                                                        </Grid.RowDefinitions>


                                                                        <Image
                                                                            Grid.Row="0"
                                                                            Width="80"
                                                                            Height="80"
                                                                            Margin="2.5,2.5,2.5,10"
                                                                            VerticalAlignment="Top"
                                                                            AllowDrop="True"
                                                                            Cursor="Hand"
                                                                            FocusVisualStyle="{x:Null}"
                                                                            MouseEnter="Image_MouseEnter"
                                                                            MouseLeave="Image_MouseLeave"
                                                                            Source="{Binding SmallImage}"
                                                                            Stretch="UniformToFill" />




                                                                        <TextBox
                                                                            Name="ActorNameTextBox"
                                                                            Grid.Row="1"
                                                                            Width="80"
                                                                            MaxHeight="60"
                                                                            Margin="0"
                                                                            FontSize="12"
                                                                            Foreground="{DynamicResource Window.Foreground}"
                                                                            Opacity="0.7"
                                                                            Style="{StaticResource ReadOnlyWrapTextBox}"
                                                                            Text="{Binding ActorName}"
                                                                            ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Text}" />
                                                                        <!--<Label
                                                                        Grid.Row="2"
                                                                        Width="120"
                                                                        MaxHeight="60"
                                                                        VerticalAlignment="Bottom"
                                                                        Background="{DynamicResource Window.Detail.Background}"
                                                                        BorderThickness="0"
                                                                        Content="{Binding Count}"
                                                                        FontSize="18"
                                                                        Foreground="{DynamicResource Window.Foreground}"
                                                                        Opacity="0.7"
                                                                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content}" />-->

                                                                    </Grid>
                                                                </Grid>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </ScrollViewer>


                                                <StackPanel Style="{StaticResource InfoStackPanel}" Tag="{Binding CurrentVideo.Director}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Director}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <Border
                                                        MaxWidth="250"
                                                        Margin="2"
                                                        MouseLeftButtonUp="ShowSameDirector"
                                                        Style="{StaticResource HoverBorder}">
                                                        <TextBlock
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding CurrentVideo.Director}"
                                                            TextTrimming="WordEllipsis"
                                                            TextWrapping="NoWrap" />
                                                    </Border>
                                                </StackPanel>


                                                <!--<StackPanel Style="{StaticResource InfoStackPanel}" Tag="{Binding CurrentVideo.Series}">-->

                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{DynamicResource Tag}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="：" />
                                                    <!--<Border
                                                        MaxWidth="250"
                                                        Margin="2"
                                                        MouseLeftButtonUp="ShowSameSeries"
                                                        Style="{StaticResource HoverBorder}">
                                                        <TextBlock
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding CurrentVideo.Series}"
                                                            TextTrimming="WordEllipsis"
                                                            TextWrapping="NoWrap" />
                                                    </Border>-->
                                                    <ItemsControl
                                                        Grid.Column="2"
                                                        Height="auto"
                                                        Margin="5,3"
                                                        VerticalAlignment="Top"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding CurrentVideo.SeriesList}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border
                                                                    Margin="5,0"
                                                                    Padding="5,2"
                                                                    super:CommonExt.HoverBackground="{DynamicResource Window.Title.Background}"
                                                                    CornerRadius="3"
                                                                    Cursor="Hand"
                                                                    MouseLeftButtonUp="ShowSameSeries"
                                                                    Style="{StaticResource HoverBorder}">
                                                                    <TextBlock
                                                                        Style="{StaticResource BaseTextBlock}"
                                                                        Text="{Binding Value}"
                                                                        ToolTip="{x:Null}" />
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>
                                                <!--</StackPanel>-->

                                                <StackPanel
                                                    Margin="0,5,0,5"
                                                    Style="{StaticResource InfoStackPanel}"
                                                    Tag="{Binding CurrentVideo.VideoType}"
                                                    Visibility="{Binding TeenMode, Converter={StaticResource BoolToOppositeVisibilityConverter}, Mode=OneWay, Source={x:Static local:ConfigManager.Settings}}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Censored}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <ComboBox
                                                        Height="30"
                                                        MinWidth="100"
                                                        Margin="5"
                                                        HorizontalAlignment="Stretch"
                                                        SelectedIndex="{Binding CurrentVideo.VideoType, Converter={StaticResource VideoTypeToIntConverter}, Mode=TwoWay}"
                                                        SelectionChanged="ComboBox_SelectionChanged"
                                                        Style="{StaticResource BorderComboBox}">
                                                        <ComboBoxItem Content="{DynamicResource Normal}" />
                                                        <ComboBoxItem Content="{DynamicResource Uncensored}" />
                                                        <ComboBoxItem Content="{DynamicResource Censored}" />
                                                        <ComboBoxItem Content="{DynamicResource Europe}" />
                                                    </ComboBox>

                                                </StackPanel>

                                                <StackPanel
                                                    Margin="0,5,0,0"
                                                    Style="{StaticResource InfoStackPanel}"
                                                    Tag="{Binding CurrentVideo.Rating}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Rating}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <TextBox
                                                        Margin="0"
                                                        Style="{StaticResource ViewTextBox}"
                                                        Text="{Binding CurrentVideo.Rating}" />
                                                </StackPanel>



                                                <StackPanel Style="{StaticResource InfoStackPanel}" Tag="{Binding CurrentVideo.Studio}">
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Made}" />
                                                    <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                                    <Border
                                                        MaxWidth="250"
                                                        Margin="2"
                                                        MouseLeftButtonUp="ShowSameStudio"
                                                        Style="{StaticResource HoverBorder}">
                                                        <TextBlock
                                                            Style="{StaticResource BaseTextBlock}"
                                                            Text="{Binding CurrentVideo.Studio}"
                                                            TextTrimming="WordEllipsis"
                                                            TextWrapping="NoWrap" />
                                                    </Border>
                                                </StackPanel>



                                                <!--  类别  -->
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{DynamicResource Genre}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        Margin="0,5,0,0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="：" />
                                                    <ItemsControl
                                                        Grid.Column="2"
                                                        Height="auto"
                                                        Margin="5,3"
                                                        VerticalAlignment="Top"
                                                        Background="Transparent"
                                                        ItemsSource="{Binding CurrentVideo.GenreList}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Orientation="Horizontal" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>

                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border
                                                                    Margin="5,0"
                                                                    Padding="5,2"
                                                                    super:CommonExt.HoverBackground="{DynamicResource Window.Title.Background}"
                                                                    CornerRadius="3"
                                                                    Cursor="Hand"
                                                                    MouseLeftButtonUp="ShowSameGenre"
                                                                    Style="{StaticResource HoverBorder}">
                                                                    <TextBlock
                                                                        Style="{StaticResource BaseTextBlock}"
                                                                        Text="{Binding Value}"
                                                                        ToolTip="{x:Null}" />
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>

                                                <!--  标签  -->
                                                <Grid Margin="0,10,0,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="auto" />
                                                        <RowDefinition Height="*" />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Height="auto"
                                                        VerticalAlignment="Center"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{DynamicResource Label}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        Height="auto"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="：" />

                                                    <Button
                                                        Grid.Column="2"
                                                        Height="auto"
                                                        MinWidth="0"
                                                        MinHeight="0"
                                                        Margin="0"
                                                        Padding="10,4"
                                                        Click="AddToLabel"
                                                        Content="{DynamicResource AddTo}"
                                                        Style="{StaticResource ButtonPrimary}" />
                                                    <super:TagPanel
                                                        Name="labelTagPanel"
                                                        Grid.Row="1"
                                                        Grid.Column="0"
                                                        Grid.ColumnSpan="4"
                                                        AddButtonVerticalAlignment="Top"
                                                        ItemsSource="{Binding CurrentVideo.LabelList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                        TagChanged="LabelChanged" />

                                                    <Popup
                                                        x:Name="searchLabelPopup"
                                                        Width="800"
                                                        MinHeight="300"
                                                        AllowsTransparency="True"
                                                        HorizontalOffset="-5"
                                                        Placement="Bottom"
                                                        PlacementTarget="{Binding ElementName=labelTagPanel}"
                                                        PopupAnimation="Fade"
                                                        StaysOpen="False"
                                                        VerticalOffset="-5">
                                                        <Grid Margin="5">
                                                            <Border
                                                                Margin="5"
                                                                Background="{DynamicResource Menu.Background}"
                                                                CornerRadius="5"
                                                                Effect="{StaticResource PopupDropShadowEffect}" />
                                                            <Grid Margin="4,5">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="auto" />
                                                                    <RowDefinition Height="*" />
                                                                </Grid.RowDefinitions>

                                                                <super:SearchBox
                                                                    Grid.Row="0"
                                                                    Margin="5"
                                                                    SearchOnTextChanged="False"
                                                                    ShowSearchButton="True"
                                                                    Text="{Binding LabelText, Mode=TwoWay}" />


                                                                <ScrollViewer
                                                                    Grid.Row="1"
                                                                    CanContentScroll="True"
                                                                    FocusVisualStyle="{x:Null}"
                                                                    IsDeferredScrollingEnabled="False"
                                                                    VerticalScrollBarVisibility="Auto">
                                                                    <ItemsControl
                                                                        Name="labelItemsControl"
                                                                        Margin="5"
                                                                        Background="Transparent"
                                                                        ItemsSource="{Binding CurrentLabelList}"
                                                                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                                        <ItemsControl.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ItemsControl.ItemsPanel>
                                                                        <ItemsControl.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <Border
                                                                                    Margin="5"
                                                                                    Padding="4"
                                                                                    CornerRadius="4"
                                                                                    MouseUp="Border_MouseUp"
                                                                                    Style="{StaticResource HoverBorder}">
                                                                                    <TextBlock
                                                                                        FontSize="14"
                                                                                        Foreground="{DynamicResource Window.Sub.Foreground}"
                                                                                        Style="{StaticResource BaseTextBlock}"
                                                                                        Text="{Binding}" />
                                                                                </Border>
                                                                            </DataTemplate>
                                                                        </ItemsControl.ItemTemplate>
                                                                    </ItemsControl>
                                                                </ScrollViewer>
                                                            </Grid>
                                                        </Grid>
                                                    </Popup>



                                                </Grid>


                                                <!--  摘要  -->
                                                <Grid Margin="0,5" Background="Transparent">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.Style>
                                                        <Style TargetType="Grid">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding CurrentVideo.Plot}" Value="">
                                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Grid.Style>



                                                    <TextBlock
                                                        Grid.Column="0"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="{DynamicResource Plot}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        VerticalAlignment="Top"
                                                        Style="{StaticResource BaseTextBlock}"
                                                        Text="：" />

                                                    <StackPanel Grid.Column="2">
                                                        <Button
                                                            x:Name="tlBtn"
                                                            Margin="5,10"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Top"
                                                            Click="TranslateMovie"
                                                            Content="{DynamicResource Translate}"
                                                            Cursor="Hand"
                                                            IsEnabled="False"
                                                            Style="{StaticResource ButtonPrimary}"
                                                            Visibility="Collapsed" />
                                                        <TextBox
                                                            Height="auto"
                                                            Margin="5,0"
                                                            Style="{StaticResource ViewTextBox}"
                                                            Text="{Binding CurrentVideo.Plot}"
                                                            TextAlignment="Left"
                                                            TextWrapping="Wrap" />
                                                    </StackPanel>

                                                </Grid>

                                            </StackPanel>
                                        </ScrollViewer>
                                    </Grid>

                                </TabItem>
                                <TabItem
                                    Margin="5"
                                    Padding="10,5"
                                    Header="{DynamicResource VideoInfo}"
                                    Style="{DynamicResource RoundTabItemStyle}">
                                    <StackPanel Name="infoStackPanel">

                                        <super:HoverPath
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            Click="CopyVideoInfo"
                                            Style="{StaticResource CopyHoverPath}" />

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock
                                                Width="auto"
                                                Style="{StaticResource BaseTextBlock}"
                                                Text="{DynamicResource Format}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Format}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Duration}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Duration}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FrameRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.FrameRate}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource BitRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.BitRate}" />
                                        </StackPanel>





                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Resolution}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Resolution}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource DisplayAspectRatio}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.DisplayAspectRatio}" />
                                        </StackPanel>



                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource BitDepth}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.BitDepth}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FrameCount}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.FrameCount}" />
                                        </StackPanel>

                                        <Rectangle
                                            Width="auto"
                                            Height="1"
                                            Margin="0,5"
                                            Fill="{DynamicResource Window.Foreground}" />

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource AudioFormat}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.AudioFormat}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource AudioBitRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.AudioBitRate}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource AudioSamplingRate}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.AudioSamplingRate}" />
                                        </StackPanel>
                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource Channel}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Channel}" />
                                        </StackPanel>

                                        <Rectangle
                                            Width="auto"
                                            Height="1"
                                            Margin="0,5"
                                            Fill="{DynamicResource Window.Foreground}" />




                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FileExtension}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.Extension}" />
                                        </StackPanel>

                                        <StackPanel Margin="0,5" Orientation="Horizontal">
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="{DynamicResource FileSize}" />
                                            <TextBlock Style="{StaticResource BaseTextBlock}" Text="：" />
                                            <TextBox
                                                Margin="0"
                                                Style="{StaticResource ViewTextBox}"
                                                Text="{Binding VideoInfo.FileSize}" />
                                        </StackPanel>

                                        <TextBlock
                                            Margin="0"
                                            Cursor="Hand"
                                            Foreground="SkyBlue"
                                            MouseEnter="TextBox_MouseEnter"
                                            MouseLeave="TextBox_MouseLeave"
                                            PreviewMouseLeftButtonUp="OpenFilePath"
                                            Style="{StaticResource BaseTextBlock}"
                                            Text="{Binding VideoInfo.FileName}"
                                            TextWrapping="Wrap" />

                                    </StackPanel>

                                </TabItem>
                            </TabControl>
                        </Border>




                        <Grid
                            x:Name="NextGrid"
                            Grid.Column="1"
                            PreviewMouseWheel="Border_PreviewMouseWheel">
                            <Border
                                x:Name="NextBorder"
                                Width="30"
                                Height="60"
                                Margin="5,0"
                                CornerRadius="10"
                                Cursor="Hand"
                                MouseLeftButtonUp="NextMovie"
                                RenderTransformOrigin="0.5, 0.5"
                                ToolTip="{DynamicResource Next}">
                                <Border.RenderTransform>
                                    <RotateTransform Angle="180" />
                                </Border.RenderTransform>
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="{DynamicResource Window.Side.Background}" />
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="{DynamicResource Window.Title.Background}" />
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>

                                <Viewbox
                                    Width="20"
                                    Height="auto"
                                    Margin="-5,0,0,0"
                                    VerticalAlignment="Center">
                                    <Path
                                        Width="auto"
                                        Data="M1277.88977564 224.440834H740.72230864l-0.906357-176.437459c-0.151059-42.749829-51.964457-64.049214-82.17635-33.83732L194.49127464 478.371798c-18.882433 18.882433-18.731374 49.396446 0.151059 68.27888L662.32244564 1009.950065c30.514012 30.211894 82.32741 8.45933 82.02529-34.441559l-0.755297-170.999317H1278.04083464c26.284347 0 47.432673-21.299385 47.432673-47.432673V271.873506c0-26.284347-21.299385-47.432673-47.583732-47.432672z"
                                        Fill="{DynamicResource Window.Sub.Foreground}" />
                                </Viewbox>
                            </Border>
                        </Grid>
                    </Grid>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</Window>
